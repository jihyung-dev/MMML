<!DOCTYPE html>
<html lang="ko"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layouts/my_layout}"
      th:with="title='찜한 핫딜'">

<head>
    <meta charset="UTF-8">

    <th:block layout:fragment="css">
        <link rel="stylesheet" href="/css/mypage.css">
    </th:block>
</head>

<body>
<div layout:fragment="content">

    <section class="wishlist-wrap">

        <!-- header -->
        <div class="wishlist-header">
            <h2>🛍️ 찜한 핫딜</h2>
            <p th:text="'총 ' + ${wishPage.totalElements} + '개 상품'">총 0개 상품</p>
        </div>

        <!-- empty -->
        <div class="empty-wishlist" th:if="${wishPage.totalElements == 0}">
            <span>아직 찜한 상품이 없어요</span>
            <a href="/hotdeal">핫딜 구경하러 가기 →</a>
        </div>

        <!-- list -->
        <div class="wishlist-grid" th:if="${wishPage.totalElements > 0}">
            <div class="wishlist-card" th:each="wish : ${wishPage.content}">

                <!-- 찜 삭제 (UI만 있음, 기능은 나중) -->
                <button class="wish-remove" title="찜 삭제">×</button>

                <a th:href="@{/hotdeal/{id}(id=${wish.item.id})}"
                   style="text-decoration:none; color:inherit;">

                    <div class="wishlist-img">
                        <img th:src="${wish.item.itemImageUrl != null ? wish.item.itemImageUrl : '/img/no-image.png'}"
                             alt="상품 이미지"
                             onerror="this.src='/img/no-image.png'">
                    </div>

                    <div class="wishlist-info">
                        <p class="item-name"
                           th:text="${wish.item.itemName}">
                            상품명
                        </p>

                        <div class="price-box">
                            <span class="origin"
                                  th:if="${wish.item.originalPrice != null}"
                                  th:text="${#numbers.formatInteger(wish.item.originalPrice,0,'COMMA')} + '원'">
                                0원
                            </span>

                            <span class="sale"
                                  th:text="${#numbers.formatInteger(wish.item.itemSaleprice,0,'COMMA')} + '원'">
                                0원
                            </span>
                        </div>

                        <span class="wish-date"
                              th:text="${#temporals.format(wish.createdAt,'yyyy.MM.dd')} + ' 찜함'">
                            2025.01.01 찜함
                        </span>
                    </div>
                </a>
            </div>
        </div>

    </section>

</div>
</body>
</html>