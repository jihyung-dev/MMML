<!doctype html>
<html lang="ko"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layouts/default_layout}"
      th:with="CONTENT_TITLE=${item.itemName} + ' | Hotdeal'">
<head>
    <!-- í”„ë¡œì íŠ¸ CSS -->
    <link  layout:fragment="css" th:href="@{/css/item-detail.css}" rel="stylesheet"/>
</head>

<!--<body class="bg-light">-->
<body>

<!--<div class="container py-4">-->
<div layout:fragment="content" class="mt-4">
    <!-- ìƒë‹¨ ë©”ë‰´ / ë’¤ë¡œê°€ê¸° -->
    <!--<div class="d-flex justify-content-between align-items-center mb-3">
        <div>
            <a th:href="@{/hotdeal}" class="btn btn-outline-secondary btn-sm">â† ëª©ë¡ìœ¼ë¡œ</a>
        </div>
        <div class="d-flex gap-2">
            <a th:href="@{/mypage}" class="btn btn-outline-secondary btn-sm">ë§ˆì´í˜ì´ì§€</a>
            <a th:href="@{/hotdeal}" class="btn btn-primary btn-sm">í•«ë”œ í™ˆ</a>
        </div>
    </div>--> <!--ë‚˜ì¤‘ì— ì“¸ ì¼ ì—†ìœ¼ë©´ ì‚­ì œí•˜ê² ìŒ-->

    <div class="row g-4">
        <!-- ì´ë¯¸ì§€ / ìºëŸ¬ì…€ -->
        <div class="col-12 col-lg-6">
            <div th:if="${item.images != null and #lists.size(item.images) > 0}">
                <div id="itemCarousel" class="carousel slide" data-bs-ride="carousel">
                    <div class="carousel-inner">
                        <div th:each="img, idx : ${item.images}"
                             th:classappend="${idx.index == 0} ? 'carousel-item active' : 'carousel-item'">
                            <img th:src="${img.imageUrl}" th:alt="${item.itemName}" class="d-block w-100 thumb"
                                 onerror="this.onerror=null;this.src='/img/no-image.png'"/>
                        </div>
                    </div>
                    <button class="carousel-control-prev" type="button" data-bs-target="#itemCarousel" data-bs-slide="prev">
                        <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                        <span class="visually-hidden">Previous</span>
                    </button>
                    <button class="carousel-control-next" type="button" data-bs-target="#itemCarousel" data-bs-slide="next">
                        <span class="carousel-control-next-icon" aria-hidden="true"></span>
                        <span class="visually-hidden">Next</span>
                    </button>
                </div>
            </div>
            <!-- imagesê°€ ìˆì„ ë•Œë§Œ ë°˜ë³µ -->
            <th:block th:if="${item.images != null}">
                <div th:each="img : ${item.images}">
                    <img th:src="@{${img.imageUrl}}" />
                </div>
            </th:block>
            <div th:if="${item.images == null or #lists.size(item.images) == 0}" class="no-image">
                ì´ë¯¸ì§€ ì—†ìŒ
            </div>
        </div>

        <!-- ìƒí’ˆ ì •ë³´ / ì˜µì…˜ -->
        <div class="col-12 col-lg-6">
            <div class="card">
                <div class="card-body">
                    <!-- ìƒí’ˆ ì´ë¦„ -->
                    <h3 class="card-title" th:text="${item.itemName}">ìƒí’ˆëª…</h3>

                    <!-- ê°€ê²© í‘œì‹œ -->
                    <div class="mb-2">
                        <!-- ì›ë˜ ê°€ê²©: ìˆì„ ë•Œë§Œ ë³´ì—¬ì¤Œ, ì·¨ì†Œì„  í‘œì‹œ -->
                        <span class="original-price text-muted text-decoration-line-through"
                              th:if="${item.originalPrice != null}"
                              th:text="${item.formattedOriginalPrice}">0ì›</span>

                        <!-- í˜„ì¬ ê°€ê²©(ì„¸ì¼ ê°€ê²©): í•­ìƒ ë³´ì—¬ì¤Œ, ê°•ì¡° í‘œì‹œ -->
                        <span class="price-strong text-danger ms-2"
                              th:text="${item.formattedPrice}">0ì›</span>
                    </div>

                    <div class="mb-2 text-muted">
                        <!-- ì„¸ì¼ ê¸°ê°„ -->
                        <span th:if="${item.saleStartAt != null and item.saleEndAt != null}">
                            ì„¸ì¼ ê¸°ê°„:
                        <span th:text="${#temporals.format(item.saleStartAt, 'yyyy-MM-dd')}"></span>
                            ~
                        <span th:text="${#temporals.format(item.saleEndAt, 'yyyy-MM-dd')}"></span>
                        </span>
                        <br/>

                        <!-- íŒë§¤ ìƒíƒœ -->
                        <span th:if="${item.saleStatus != null}">
                            íŒë§¤ ìƒíƒœ:
                        <span th:class="${item.saleStatus == 'ON_SALE' ? 'text-success' : item.saleStatus == 'SOLD_OUT' ? 'text-warning' : 'text-secondary'}"
                              th:text="${item.saleStatus == 'ON_SALE' ? 'ì„¸ì¼ì¤‘' : item.saleStatus == 'SOLD_OUT' ? 'ë§¤ì§„' : 'íŒë§¤ì¢…ë£Œ'}"></span>
                        </span>
                    </div>

                    <div class="mb-2 text-muted">
                        ì¡°íšŒìˆ˜: <span th:text="${item.viewCount}">0</span>
                        &nbsp;Â·&nbsp; ì¸ê¸°ë„: <span th:text="${item.popularityScore}">0</span>
                    </div>

                    <hr/>

                    <!-- ì˜µì…˜ ì„ íƒ (ë‘ ê°€ì§€ ì²˜ë¦¬: optionGroups ê°€ ìˆì„ ë•Œ -> ì—¬ëŸ¬ select, ì—†ì„ ë•Œ -> single selectë¡œ ëª¨ë“  ì˜µì…˜ ë…¸ì¶œ) -->
                    <form id="purchaseForm" th:action="@{/hotdeal/order/create}" method="post" class="mb-3">
                        <input type="hidden" name="itemId" th:value="${item.id}"/>

                        <!-- ì•ˆë‚´ ë©”ì‹œì§€: íŒë§¤ ì¢…ë£Œ ë˜ëŠ” ë§¤ì§„ ì‹œ -->
                        <div th:if="${item.saleStatus != 'ON_SALE'}" class="alert alert-warning">
                            ì´ ìƒí’ˆì€ í˜„ì¬ <span th:text="${item.saleStatus == 'SOLD_OUT' ? 'ë§¤ì§„' : 'íŒë§¤ ì¢…ë£Œ'}"></span> ìƒíƒœë¡œ, ì˜µì…˜ ì„ íƒ ë° êµ¬ë§¤ê°€ ë¶ˆê°€ëŠ¥í•©ë‹ˆë‹¤.
                        </div>

                        <!-- ì˜µì…˜ ê·¸ë£¹ë³„ select -->
                        <div th:if="${optionGroups != null}">
                            <div th:each="group : ${optionGroups}" class="mb-2">
                                <div class="option-label" th:text="${group.name}">ì˜µì…˜</div>
                                <select class="form-select option-group" th:data-group-name="${group.name}"
                                        th:disabled="${item.saleStatus != 'ON_SALE'}">
                                    <option value="" style="color:#ccc">ì„ íƒí•˜ì„¸ìš”</option>
                                    <option th:each="opt : ${group.options}"
                                            th:value="${opt.id}"
                                            th:text="${opt.optionType + ' - ' + opt.optionValue + opt.formattedAdditionalPrice}"
                                            th:data-additional-price="${opt.additionalPrice}"
                                            th:data-stock="${opt.stock}"
                                            th:data-option-type="${opt.optionType}"
                                            th:data-option-value="${opt.optionValue}"
                                            th:disabled="${opt.stock == 0 || item.saleStatus != 'ON_SALE'}">
                                    </option>
                                </select>
                            </div>
                        </div>

                        <!-- ë‹¨ì¼ ì˜µì…˜ fallback -->
                        <div th:if="${optionGroups == null}">
                            <div class="mb-2">
                                <div class="option-label">ì˜µì…˜</div>
                                <select class="form-select single-option"
                                        th:disabled="${item.saleStatus != 'ON_SALE'}">
                                    <option value="" style="color: #ccc">ì„ íƒí•˜ì„¸ìš”</option>
                                    <option th:each="opt : ${item.hotdealOptions}"
                                            th:value="${opt.id}"
                                            th:text="${opt.optionType + ' - ' + opt.optionValue + opt.formattedAdditionalPrice}"
                                            th:data-additional-price="${opt.additionalPrice}"
                                            th:data-stock="${opt.stock}"
                                            th:disabled="${opt.stock == 0 || item.saleStatus != 'ON_SALE'}"></option>
                                </select>
                            </div>
                        </div>

                        <!-- ìˆ˜ëŸ‰ -->
                        <div class="mb-3 d-flex align-items-center gap-2">
                            <!--<label class="option-label mb-0">ìˆ˜ëŸ‰</label>-->
<!--                            <input id="qtyInput" name="qty" type="number" min="1" value="1" class="form-control" style="width:100px;"/>-->
                            <div class="ms-3 text-muted">ë‚¨ì€ì¬ê³ : <span id="stockDisplay">â€”</span></div>
                        </div>

                        <!-- ì˜µì…˜ë³„ ê¸ˆì•¡
                        <div class="mb-3">
                            <div>ì´ ì˜ˆìƒê²°ì œê¸ˆì•¡: <strong id="currentPrice" th:text="${item.formattedPrice}" data-base-price="${item.itemSalePrice}">0ì›</strong></div>
                        </div>-->


                        <!-- ì¥ë°”êµ¬ë‹ˆ í‘œì‹œ ì˜ì—­ -->
                        <div id="semiCart" class="mb-3">
                            <h5>ë¦¬ìŠ¤íŠ¸</h5>
                            <ul id="semiCartList" class="list-group"></ul>
                        </div>

                        <!-- ì¶”ê°€ê¸ˆì•¡ / ì´í•© -->
                        <div class="mb-3">
                            <small class="text-muted">ì¶”ê°€ê¸ˆì•¡: <span id="additionalPrice">0ì›</span></small>
                            <div>ì´ ê²°ì œê¸ˆì•¡: <strong id="cartTotalPrice">0ì›</strong></div>
                        </div>

                        <!-- ë²„íŠ¼ -->
                        <div class="d-flex gap-2">
                            <button type="button" class="btn" id="wishBtn"
                                    th:data-item-id="${item.id}"
                                    th:data-is-wished="${item.isLiked}"
                                    th:classappend="${item.isLiked} ? 'btn-primary text-white' : 'btn-outline-primary'">
                                <span th:text="${item.isLiked} ? 'â™¥ ì°œí•¨' : 'â™¥ ì°œí•˜ê¸°'"></span>
                            </button>
                            <button type="submit" class="btn btn-success" th:disabled="${item.saleStatus != 'ON_SALE'}" id="buyBtn">êµ¬ë§¤í•˜ê¸°</button>
                            <!--<button type="button" class="btn btn-primary" id="cartBtn">ë‹´ê¸°</button>-->
                        </div>
                    </form>

                    <hr/>

                    <!-- íŒë§¤ì ì •ë³´ -->
                    <div class="seller-box mt-3">
                        <!-- í´ë¦­í•˜ëŠ” ìƒë‹¨ ì˜ì—­ -->
                        <div class="seller-header" onclick="toggleSellerInfo()">
                            <a href="#seller-info" data-bs-toggle="collapse" style="text-decoration:none; color:inherit;">
                                <strong th:text="${item.seller != null ? item.seller.bizName : 'íŒë§¤ì' }"></strong>
                                <span id="arrow">â–¼</span>
                            </a>
                        </div>

                        <!-- ì ‘íˆëŠ” ì˜ì—­ -->
                        <div id="seller-info" class="collapse" th:if="${item.seller != null}">
                            ì‚¬ì—…ìë²ˆí˜¸: <span th:text="${item.seller.bizNo}"></span><br/>
                            ì—…ì¢…: <span th:text="${item.seller.bizType}"></span>
                        </div>

                        <div th:if="${item.seller == null}" class="text-muted">
                            íŒë§¤ì ì •ë³´ ì—†ìŒ
                        </div>
                    </div>

                </div>
            </div>

            <!-- ìƒì„¸ ì„¤ëª… (ê°„ë‹¨) -->
            <div class="card mt-3">
                <div class="card-body">
                    <h5>ìƒí’ˆ ìƒì„¸ì •ë³´</h5>
                    <div th:utext="${item.description != null}">
                        <p th:utext="${item.description}">ìƒì„¸ ì„¤ëª… ì˜ì—­</p>
                    </div>
                    <div th:unless="${item.description != null}" class="text-muted">ìƒì„¸ ì„¤ëª…ì´ ì—†ìŠµë‹ˆë‹¤.</div>
                </div>
            </div>
        </div>
    </div>
</div>

<script layout:fragment="script">
    document.addEventListener('DOMContentLoaded', () => {
        /// const cart = [];
        window.cart = window.cart || [];
        const semiCartList = document.getElementById('semiCartList');
        const additionalPriceDisplay = document.getElementById('additionalPrice');
        const cartTotalPriceDisplay = document.getElementById('cartTotalPrice');
        const stockDisplay = document.getElementById('stockDisplay');

        const basePriceEl = document.querySelector('.price-strong');
        const parsePrice = txt => Number(String(txt).replace(/[^0-9.-]+/g,"")) || 0;
        const currencyFmt = num => String(num).replace(/\B(?=(\d{3})+(?!\d))/g, ",") + 'ì›';
        const basePrice = basePriceEl ? parsePrice(basePriceEl.innerText) : 0;

        function addOptionToCart() {
            let optionText = "";
            let optionId = "";
            let additionalPrice = 0;
            let stock = null;

            const groupSelects = document.querySelectorAll('.option-group');
            if(groupSelects.length > 0){
                for(const sel of groupSelects){
                    if(!sel.value) return; // ì„ íƒ ì•ˆ ëœ ì˜µì…˜ ë¬´ì‹œ
                    const opt = sel.options[sel.selectedIndex];
                    optionText += `${opt.text.split(' - ')[1].split(' (+')[0]} / `; // ì˜µì…˜ ê°’ë§Œ ì¶”ì¶œ
                    optionId += sel.value + ",";
                    additionalPrice += parseInt(opt.dataset.additionalPrice || 0);
                    stock = stock === null ? parseInt(opt.dataset.stock || 0) : Math.min(stock, parseInt(opt.dataset.stock || 0));
                    // ì„ íƒ ì™„ë£Œ í›„ ì…€ë ‰íŠ¸ ë°•ìŠ¤ ì´ˆê¸°í™” (ë‹¤ìŒ ì˜µì…˜ ì„ íƒì„ ìœ„í•¨)
                    sel.value = "";
                }
                optionText = optionText.slice(0, -3);
                optionId = optionId.slice(0, -1);
            } else {
                const sel = document.querySelector('.single-option');
                if(!sel.value) return;
                const opt = sel.options[sel.selectedIndex];
                optionText = opt.text.split(' - ')[1].split(' (+')[0]; // ì˜µì…˜ ê°’ë§Œ ì¶”ì¶œ
                optionId = sel.value;
                additionalPrice = parseInt(opt.dataset.additionalPrice || 0);
                stock = parseInt(opt.dataset.stock || 0);
                // ì„ íƒ ì™„ë£Œ í›„ ì…€ë ‰íŠ¸ ë°•ìŠ¤ ì´ˆê¸°í™”
                sel.value = "";
            }

            // ğŸŒŸ [ìˆ˜ì •]: ì˜µì…˜ ì¬ê³ ë¥¼ `stockDisplay`ì— í‘œì‹œí•©ë‹ˆë‹¤. (ì…€ë ‰íŠ¸ ë°•ìŠ¤ ì´ˆê¸°í™” ì§í›„)
            stockDisplay.textContent = stock !== null ? stock : 'â€”';

            // ì¥ë°”êµ¬ë‹ˆì— ê°™ì€ ì˜µì…˜ ìˆìœ¼ë©´ ìˆ˜ëŸ‰ 1 ì¦ê°€, ì•„ë‹ˆë©´ ìƒˆë¡œ ì¶”ê°€
            const existing = window.cart.find(c => c.optionId === optionId);
            if(existing){
                if(existing.quantity + 1 > stock){
                    alert("ì¬ê³ ê°€ ë¶€ì¡±í•©ë‹ˆë‹¤.");
                    return;
                }
                existing.quantity += 1;
            } else {
                window.cart.push({ optionId, optionText, quantity: 1, additionalPrice, basePrice, stock });
            }

            renderCart();
            //updateStockDisplay();
        }

        function renderCart() {
            semiCartList.innerHTML = "";
            let totalCartPrice = 0;
            let totalAdd = 0;

            window.cart.forEach((item, index) => {
                const itemTotal = (item.basePrice + item.additionalPrice) * item.quantity;
                totalCartPrice += itemTotal;
                totalAdd += item.additionalPrice * item.quantity;

                const li = document.createElement('li');
                li.className = "list-group-item d-flex justify-content-between align-items-center";

                // ğŸŒŸ ì¤‘ìš” ìˆ˜ì •: type="hidden"ìœ¼ë¡œ ë³€ê²½í•˜ê³ , name="qty"ë¡œ ìˆ˜ì •
                li.innerHTML = `
                    <input type="hidden" name="optionId" value="${item.optionId}">
                    <input type="hidden" name="quantity" value="${item.quantity}">
                    <div>
                        <strong>${item.optionText}</strong>
                        <br>
                        <small>${currencyFmt(item.basePrice + item.additionalPrice)} / ê°œ</small>
                    </div>
                    <div class="d-flex align-items-center gap-2">
                        <button type="button" class="btn btn-sm btn-outline-secondary cart-minus" data-index="${index}"
                                 style="padding:0.2rem 0.3rem; font-size:0.6rem; line-height:2; width: 1.5rem; min-width:0;">-</button>
                        <span>${item.quantity}</span>
                        <button type="button" class="btn btn-sm btn-outline-secondary cart-plus" data-index="${index}"
                                type="button"
                                style="padding:0.2rem 0.3rem; font-size:0.6rem; line-height:2; width: 1.5rem; min-width:0;">+</button>
                        <strong class="ms-2">${currencyFmt(itemTotal)}</strong>
                    </div>
                `;
                semiCartList.appendChild(li);
            });

            cartTotalPriceDisplay.textContent = currencyFmt(totalCartPrice);
            additionalPriceDisplay.textContent = currencyFmt(totalAdd);

            document.querySelectorAll('.cart-plus').forEach(btn => {
                btn.addEventListener('click', () => changeQty(btn.dataset.index, +1));
            });
            document.querySelectorAll('.cart-minus').forEach(btn => {
                btn.addEventListener('click', () => changeQty(btn.dataset.index, -1));
            });
        }

        // ì°œí•˜ê¸°
        const wishBtn = document.getElementById('wishBtn');
        if (wishBtn) {
            const itemId = wishBtn.dataset ? wishBtn.dataset.itemId : null;
            wishBtn.addEventListener('click', async (e) => {
                if (!itemId) { alert('ì•„ì´í…œ ì •ë³´ê°€ ì—†ìŠµë‹ˆë‹¤.'); return; }
                try {
                    const res = await fetch(`/hotdeal/wishlist/${itemId}`, { method: 'POST' });
                    if (!res.ok) {
                        if (res.status === 401) { alert('ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤.'); window.location.href = '/login'; return; }
                        throw new Error('network response not ok');
                    }
                    const json = await res.json();
                    if (json) updateWishButton(wishBtn, json.wished);
                } catch(err) { console.error('wish error', err); alert('ì°œí•˜ê¸° ì²˜ë¦¬ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.'); }
            });

            function updateWishButton(button, wished) {
                if (wished) {
                    // ì°œ í–ˆì„ ë•Œ ìŠ¤íƒ€ì¼ (íŒŒë€ìƒ‰ ì±„ì›€)
                    button.classList.remove('btn-outline-primary');
                    button.classList.add('btn-primary', 'text-white'); // btn-danger ëŒ€ì‹  í†µì¼ê° ìˆê²Œ
                    button.innerText = 'â™¥ ì°œí•¨';
                } else {
                    // ì°œ ì·¨ì†Œí–ˆì„ ë•Œ ìŠ¤íƒ€ì¼ (íŒŒë€ìƒ‰ í…Œë‘ë¦¬)
                    button.classList.remove('btn-primary', 'text-white', 'btn-danger');
                    button.classList.add('btn-outline-primary');
                    button.innerText = 'â™¥ ì°œí•˜ê¸°';
                }
            }
        }

        function changeQty(idx, diff) {
            const item = window.cart[idx];
            const newQty = item.quantity + diff;

            if(newQty < 1){
                window.cart.splice(idx, 1); // ìˆ˜ëŸ‰ 1 ë¯¸ë§Œì´ë©´ ì¥ë°”êµ¬ë‹ˆì—ì„œ ì œê±°
            }
            else if(newQty > item.stock){
                alert("ì¬ê³ ë³´ë‹¤ ë§ì´ ë‹´ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.");
                return;
            } else {
                item.quantity = newQty;
            }

            renderCart();
        }

        function updateStockDisplay() {
            let minStock = null;
            const groupSelects = document.querySelectorAll('.option-group');
            if(groupSelects.length > 0){
                groupSelects.forEach(sel => {
                    const opt = sel.options[sel.selectedIndex];
                    if(opt?.dataset){
                        const st = parseInt(opt.dataset.stock || 0);
                        minStock = minStock === null ? st : Math.min(minStock, st);
                    }
                });
            } else {
                const sel = document.querySelector('.single-option');
                if(sel?.value){
                    const opt = sel.options[sel.selectedIndex];
                    minStock = parseInt(opt.dataset.stock || 0);
                }
            }
            stockDisplay.textContent = minStock !== null ? minStock : 'â€”';
        }

        // ì˜µì…˜ ì„ íƒ ì‹œ ë°”ë¡œ ì¥ë°”êµ¬ë‹ˆì— ì¶”ê°€
        document.querySelectorAll('.option-group, .single-option').forEach(sel => {
            sel.addEventListener('change', addOptionToCart);
        });


        // ê¸°ì¡´ ì½”ë“œì—ì„œ ì‚¬ìš©ì¤‘ì¸ cart ë³€ìˆ˜ë¥¼ ì¬ì‚¬ìš©í•´ì•¼ í•¨.
        // ë§Œì•½ cart ë³€ìˆ˜ê°€ ë‹¤ë¥¸ ìŠ¤ì½”í”„ë©´ ì´ ì½”ë“œì˜ cart ì°¸ì¡°ë¥¼ ì•Œë§ê²Œ ë°”ê¿”ì¤˜.
        // ì•„ë˜ ì˜ˆì‹œëŠ” ë„ˆê°€ ì˜¬ë ¤ì¤€ ì½”ë“œì™€ í•©ì³ì„œ ì‚¬ìš©í•œë‹¤ê³  ê°€ì •.

        const purchaseForm = document.getElementById('purchaseForm');
        if (purchaseForm) {
            purchaseForm.addEventListener('submit', function(e) {
                // ì¥ë°”êµ¬ë‹ˆì— ë‹´ê¸´ ì˜µì…˜ì´ ì—†ìœ¼ë©´ ì œì¶œ ë°©ì§€
                if (!window.cart || window.cart.length === 0) {
                    e.preventDefault();
                    alert('êµ¬ë§¤í•  ì˜µì…˜ì„ 1ê°œ ì´ìƒ ì„ íƒí•´ ì£¼ì„¸ìš”.');
                    return;
                }

                // cartê°€ ë¹„ì–´ìˆì§€ ì•Šìœ¼ë©´, renderCartê°€ ìƒì„±í•œ hidden inputë“¤ì„ í†µí•´ í¼ì´ ì •ìƒ ì œì¶œë©ë‹ˆë‹¤.
            });
        }

        if (purchaseForm) {
            purchaseForm.addEventListener('submit', function(e) {
                // ì¥ë°”êµ¬ë‹ˆì— ë‹´ê¸´ ì˜µì…˜ì´ ì—†ìœ¼ë©´ ì œì¶œ ë°©ì§€
                if (!window.cart || window.cart.length === 0) {
                    e.preventDefault();
                    alert('êµ¬ë§¤í•  ì˜µì…˜ì„ 1ê°œ ì´ìƒ ì„ íƒí•´ ì£¼ì„¸ìš”.');
                    return;
                }

                // cartê°€ ë¹„ì–´ìˆì§€ ì•Šìœ¼ë©´, renderCartê°€ ìƒì„±í•œ hidden inputë“¤ì„ í†µí•´ í¼ì´ ì •ìƒ ì œì¶œë©ë‹ˆë‹¤.
            });
        }

        const buyBtn = document.getElementById('buyBtn');


    });

    // íŒë§¤ì ì •ë³´ í† ê¸€ í•¨ìˆ˜ (HTMLì—ì„œ í˜¸ì¶œë¨)
    function toggleSellerInfo() {
        const arrow = document.getElementById('arrow');
        if(arrow.textContent === 'â–¼') {
            arrow.textContent = 'â–²';
        } else {
            arrow.textContent = 'â–¼';
        }
    }

</script>

</body>
</html>