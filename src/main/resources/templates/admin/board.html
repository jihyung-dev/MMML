<!DOCTYPE html>
<html lang="ko"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layouts/default_layout}"
      th:with="CONTENT_TITLE='ê²Œì‹œíŒ ê´€ë¦¬ | ë‚´ëˆë‚´ì‚¶'">

<head>
    <meta charset="UTF-8">
    <style layout:fragment="css">
        .admin-page-wrapper {
            margin-top: 30px;
            margin-bottom: 40px;
        }

        .admin-header {
            display: flex;
            flex-wrap: wrap;
            justify-content: space-between;
            align-items: flex-end;
            gap: 12px;
            margin-bottom: 10px;
        }

        .admin-title-box {
            display: flex;
            flex-direction: column;
            gap: 4px;
        }

        .admin-table-title {
            font-size: 24px;
            font-weight: 700;
            margin: 0;
        }

        .admin-subtext {
            margin: 0;
            color: #6c757d;
            font-size: 14px;
        }

        .admin-legend {
            display: flex;
            gap: 8px;
            flex-wrap: wrap;
            font-size: 12px;
            color: #6c757d;
        }

        .admin-legend span::before {
            content: "â€¢ ";
        }

        .admin-card {
            background: #ffffff;
            border-radius: 12px;
            box-shadow: 0 4px 14px rgba(0, 0, 0, 0.05);
            border: 1px solid #f1f3f5;
            padding: 16px 18px 14px;
        }

        .admin-table-wrapper {
            margin-top: 10px;
        }

        .admin-pagination-wrapper {
            margin-top: 16px;
        }
    </style>
</head>

<body>
<main layout:fragment="content" class="container" style="min-height: 70vh;">

    <div class="admin-page-wrapper">

        <!-- ìƒë‹¨ í—¤ë” -->
        <div class="admin-header">
            <div class="admin-title-box">
                <h1 class="admin-table-title">ê²Œì‹œíŒ ê´€ë¦¬</h1>
                <p class="admin-subtext">
                    ì‚¬ìš©ìë“¤ì´ ì‘ì„±í•œ ê²Œì‹œê¸€ì„ ì¡°íšŒí•˜ê³  ê´€ë¦¬í•©ë‹ˆë‹¤.
                </p>
            </div>

            <div class="admin-legend">
                <span>ì œëª©, ì‘ì„±ì ë‹‰ë„¤ì„ìœ¼ë¡œ ê²€ìƒ‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</span>
                <span>ì œëª©ì„ í´ë¦­í•˜ë©´ ì‚¬ìš©ì ê²Œì‹œíŒ ìƒì„¸ë¡œ ì´ë™í•©ë‹ˆë‹¤.</span>
            </div>
        </div>

        <!-- ğŸ” ê²€ìƒ‰ í¼ -->
        <form class="row g-2 mb-3" th:action="@{/admin/board}" method="get">
            <div class="col-sm-4 col-8">
                <input type="text"
                       name="keyword"
                       class="form-control form-control-sm"
                       placeholder="ì œëª© / ì‘ì„±ì ë‹‰ë„¤ì„ ê²€ìƒ‰"
                       th:value="${keyword}">
            </div>
            <div class="col-auto">
                <button class="btn btn-sm btn-primary" type="submit">ê²€ìƒ‰</button>
            </div>
            <div class="col-auto" th:if="${keyword != null and !#strings.isEmpty(keyword)}">
                <a class="btn btn-sm btn-outline-secondary" th:href="@{/admin/board}">ì´ˆê¸°í™”</a>
            </div>
        </form>

        <!-- ì¹´ë“œ + í…Œì´ë¸” -->
        <div class="admin-card">
            <div class="admin-table-wrapper table-responsive">
                <table class="table table-sm table-hover align-middle mb-2">
                    <thead class="table-light">
                    <tr>
                        <th>ê¸€ ID</th>
                        <th>ì¹´í…Œê³ ë¦¬</th>
                        <th>ì œëª©</th>
                        <th>ì‘ì„±ì</th>
                        <th>ì‘ì„±ì¼</th>
                        <th>ì¡°íšŒìˆ˜</th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr th:each="p : ${postPage.content}">
                        <!-- ê¸€ ID -->
                        <td th:text="${p.id}">1</td>

                        <!-- ì¹´í…Œê³ ë¦¬ -->
                        <td th:text="${p.category}">ììœ </td>

                        <!-- ì œëª© (ì‚¬ìš©ì ê²Œì‹œíŒ ìƒì„¸ë¡œ ì´ë™) -->
                        <td>
                            <a th:href="@{'/board/' + ${p.id}}"
                               th:text="${p.postTitle}">
                                ê²Œì‹œê¸€ ì œëª©
                            </a>
                        </td>

                        <!-- ì‘ì„±ì ë‹‰ë„¤ì„ -->
                        <td>
                            <span th:if="${p.writer != null}"
                                  th:text="${p.writer.memberNickname}">
                                ë‹‰ë„¤ì„
                            </span>
                            <span th:if="${p.writer == null}" class="text-muted">
                                ì•Œ ìˆ˜ ì—†ìŒ
                            </span>
                        </td>

                        <!-- ì‘ì„±ì¼ -->
                        <td th:text="${p.createdAt != null ? #temporals.format(p.createdAt, 'yyyy-MM-dd HH:mm') : ''}">
                            2025-01-01 12:00
                        </td>

                        <!-- ì¡°íšŒìˆ˜ -->
                        <td th:text="${p.viewCnt}">0</td>
                    </tr>

                    <tr th:if="${#lists.isEmpty(postPage.content)}">
                        <td colspan="6" class="text-center text-muted py-4">
                            ì¡°ê±´ì— ë§ëŠ” ê²Œì‹œê¸€ì´ ì—†ìŠµë‹ˆë‹¤.
                        </td>
                    </tr>
                    </tbody>
                </table>
            </div>

            <!-- í˜ì´ì§€ë„¤ì´ì…˜ -->
            <div class="d-flex justify-content-center admin-pagination-wrapper"
                 th:if="${postPage.totalPages > 1}">
                <ul class="pagination pagination-sm mb-0">

                    <!-- ì²˜ìŒ í˜ì´ì§€ -->
                    <li class="page-item" th:classappend="${postPage.first} ? 'disabled'">
                        <a class="page-link"
                           th:href="@{'/admin/board'(page=0, size=${postPage.size}, keyword=${keyword})}">
                            â‰ª
                        </a>
                    </li>

                    <!-- ì´ì „ í˜ì´ì§€ -->
                    <li class="page-item" th:classappend="${postPage.first} ? 'disabled'">
                        <a class="page-link"
                           th:href="@{'/admin/board'(page=${postPage.number - 1}, size=${postPage.size}, keyword=${keyword})}">
                            â€¹
                        </a>
                    </li>

                    <!-- í˜ì´ì§€ ë²ˆí˜¸ë“¤ -->
                    <li class="page-item"
                        th:each="pNum : ${#numbers.sequence(0, postPage.totalPages - 1)}"
                        th:classappend="${pNum == postPage.number} ? 'active'">
                        <a class="page-link"
                           th:href="@{'/admin/board'(page=${pNum}, size=${postPage.size}, keyword=${keyword})}"
                           th:text="${pNum + 1}">
                            1
                        </a>
                    </li>

                    <!-- ë‹¤ìŒ í˜ì´ì§€ -->
                    <li class="page-item" th:classappend="${postPage.last} ? 'disabled'">
                        <a class="page-link"
                           th:href="@{'/admin/board'(page=${postPage.number + 1}, size=${postPage.size}, keyword=${keyword})}">
                            â€º
                        </a>
                    </li>

                    <!-- ë§ˆì§€ë§‰ í˜ì´ì§€ -->
                    <li class="page-item" th:classappend="${postPage.last} ? 'disabled'">
                        <a class="page-link"
                           th:href="@{'/admin/board'(page=${postPage.totalPages - 1}, size=${postPage.size}, keyword=${keyword})}">
                            â‰«
                        </a>
                    </li>

                </ul>
            </div>
        </div>

    </div>

</main>
</body>
</html>
