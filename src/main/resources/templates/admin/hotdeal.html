<!DOCTYPE html>
<html lang="ko"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layouts/default_layout}"
      th:with="CONTENT_TITLE='í•«ë”œ ê´€ë¦¬ | ë‚´ëˆë‚´ì‚¶'">

<head>
    <meta charset="UTF-8">
    <style layout:fragment="css">
        .admin-page-wrapper {
            margin-top: 30px;
            margin-bottom: 40px;
        }

        .admin-header {
            display: flex;
            flex-wrap: wrap;
            justify-content: space-between;
            align-items: flex-end;
            gap: 12px;
            margin-bottom: 10px;
        }

        .admin-title-box {
            display: flex;
            flex-direction: column;
            gap: 4px;
        }

        .admin-table-title {
            font-size: 24px;
            font-weight: 700;
            margin: 0;
        }

        .admin-subtext {
            margin: 0;
            color: #6c757d;
            font-size: 14px;
        }

        .admin-legend {
            display: flex;
            gap: 8px;
            flex-wrap: wrap;
            font-size: 12px;
            color: #6c757d;
        }

        .admin-legend span::before {
            content: "â€¢ ";
        }

        .admin-card {
            background: #ffffff;
            border-radius: 12px;
            box-shadow: 0 4px 14px rgba(0, 0, 0, 0.05);
            border: 1px solid #f1f3f5;
            padding: 16px 18px 14px;
        }

        .admin-table-wrapper {
            margin-top: 10px;
        }

        .admin-pagination-wrapper {
            margin-top: 16px;
        }
    </style>
</head>

<body>
<main layout:fragment="content" class="container" style="min-height: 70vh;">

    <div class="admin-page-wrapper">

        <!-- ìƒë‹¨ í—¤ë” -->
        <div class="admin-header">
            <div class="admin-title-box">
                <h1 class="admin-table-title">í•«ë”œ ê´€ë¦¬</h1>
                <p class="admin-subtext">
                    íŒë§¤ìë“¤ì´ ë“±ë¡í•œ í•«ë”œ ìƒí’ˆì„ ê²€ìˆ˜Â·ê´€ë¦¬í•©ë‹ˆë‹¤.
                </p>
            </div>

            <div class="admin-legend">
                <span>ìƒí’ˆëª…ìœ¼ë¡œ ê²€ìƒ‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</span>
                <span>íŒë§¤ê¸°ê°„ê³¼ íŒë§¤ìƒíƒœë¥¼ ê¸°ì¤€ìœ¼ë¡œ ëª¨ë‹ˆí„°ë§í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</span>
            </div>
        </div>

        <!-- ğŸ” ê²€ìƒ‰ í¼ -->
        <form class="row g-2 mb-3" th:action="@{/admin/hotdeal}" method="get">
            <div class="col-sm-4 col-8">
                <input type="text"
                       name="keyword"
                       class="form-control form-control-sm"
                       placeholder="ìƒí’ˆëª… ê²€ìƒ‰"
                       th:value="${keyword}">
            </div>
            <div class="col-auto">
                <button class="btn btn-sm btn-primary" type="submit">ê²€ìƒ‰</button>
            </div>
            <div class="col-auto" th:if="${keyword != null and !#strings.isEmpty(keyword)}">
                <a class="btn btn-sm btn-outline-secondary" th:href="@{/admin/hotdeal}">ì´ˆê¸°í™”</a>
            </div>
        </form>

        <!-- ì¹´ë“œ + í…Œì´ë¸” -->
        <div class="admin-card">
            <div class="admin-table-wrapper table-responsive">
                <table class="table table-sm table-hover align-middle mb-2">
                    <thead class="table-light">
                    <tr>
                        <th>ìƒí’ˆ ID</th>
                        <th>ìƒí’ˆëª…</th>
                        <th>ì›ê°€</th>
                        <th>íŒë§¤ê°€</th>
                        <th>ì¡°íšŒìˆ˜</th>
                        <th>ì¸ê¸°ë„</th>
                        <th>íŒë§¤ê¸°ê°„</th>
                        <th>íŒë§¤ìƒíƒœ</th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr th:each="i : ${itemPage.content}">
                        <!-- PK -->
                        <td th:text="${i.id}">1</td>

                        <!-- ìƒí’ˆëª… -->
                        <td th:text="${i.itemName}">ìƒí’ˆëª…</td>

                        <!-- ì›ê°€ -->
                        <td th:text="${i.formattedOriginalPrice}">10,000ì›</td>

                        <!-- íŒë§¤ê°€ -->
                        <td th:text="${i.formattedPrice}">9,000ì›</td>

                        <!-- ì¡°íšŒìˆ˜ -->
                        <td th:text="${i.viewCount}">0</td>

                        <!-- ì¸ê¸°ë„ ì ìˆ˜ -->
                        <td th:text="${i.popularityScore}">0</td>

                        <!-- íŒë§¤ê¸°ê°„ -->
                        <td>
                            <span th:text="${i.saleStartAt != null ? #temporals.format(i.saleStartAt, 'yyyy-MM-dd') : '-'}">
                                -
                            </span>
                            ~
                            <span th:text="${i.saleEndAt != null ? #temporals.format(i.saleEndAt, 'yyyy-MM-dd') : '-'}">
                                2025-01-10
                            </span>
                        </td>

                        <!-- íŒë§¤ ìƒíƒœ -->
                        <td th:text="${i.saleStatus}">ON_SALE</td>
                    </tr>

                    <tr th:if="${#lists.isEmpty(itemPage.content)}">
                        <td colspan="8" class="text-center text-muted py-4">
                            ì¡°ê±´ì— ë§ëŠ” í•«ë”œ ìƒí’ˆì´ ì—†ìŠµë‹ˆë‹¤.
                        </td>
                    </tr>
                    </tbody>
                </table>
            </div>

            <!-- í˜ì´ì§€ë„¤ì´ì…˜ -->
            <div class="d-flex justify-content-center admin-pagination-wrapper"
                 th:if="${itemPage.totalPages > 1}">
                <ul class="pagination pagination-sm mb-0">

                    <!-- ì²˜ìŒ í˜ì´ì§€ -->
                    <li class="page-item" th:classappend="${itemPage.first} ? 'disabled'">
                        <a class="page-link"
                           th:href="@{'/admin/hotdeal'(page=0, size=${itemPage.size}, keyword=${keyword})}">
                            â‰ª
                        </a>
                    </li>

                    <!-- ì´ì „ í˜ì´ì§€ -->
                    <li class="page-item" th:classappend="${itemPage.first} ? 'disabled'">
                        <a class="page-link"
                           th:href="@{'/admin/hotdeal'(page=${itemPage.number - 1}, size=${itemPage.size}, keyword=${keyword})}">
                            â€¹
                        </a>
                    </li>

                    <!-- í˜ì´ì§€ ë²ˆí˜¸ë“¤ -->
                    <li class="page-item"
                        th:each="pNum : ${#numbers.sequence(0, itemPage.totalPages - 1)}"
                        th:classappend="${pNum == itemPage.number} ? 'active'">
                        <a class="page-link"
                           th:href="@{'/admin/hotdeal'(page=${pNum}, size=${itemPage.size}, keyword=${keyword})}"
                           th:text="${pNum + 1}">
                            1
                        </a>
                    </li>

                    <!-- ë‹¤ìŒ í˜ì´ì§€ -->
                    <li class="page-item" th:classappend="${itemPage.last} ? 'disabled'">
                        <a class="page-link"
                           th:href="@{'/admin/hotdeal'(page=${itemPage.number + 1}, size=${itemPage.size}, keyword=${keyword})}">
                            â€º
                        </a>
                    </li>

                    <!-- ë§ˆì§€ë§‰ í˜ì´ì§€ -->
                    <li class="page-item" th:classappend="${itemPage.last} ? 'disabled'">
                        <a class="page-link"
                           th:href="@{'/admin/hotdeal'(page=${itemPage.totalPages - 1}, size=${itemPage.size}, keyword=${keyword})}">
                            â‰«
                        </a>
                    </li>

                </ul>
            </div>
        </div>

    </div>

</main>
</body>
</html>
